"use strict";(self.webpackChunkwhizardtelemetry_github_io=self.webpackChunkwhizardtelemetry_github_io||[]).push([[686],{6603:(e,r,i)=>{i.r(r),i.d(r,{assets:()=>s,contentTitle:()=>o,default:()=>c,frontMatter:()=>t,metadata:()=>d,toc:()=>u});var n=i(4848),a=i(8453);const t={sidebar_position:3,description:"Whizard-monitoring-gateway \u5f00\u542f Debug \u6a21\u5f0f\u4ee3\u7406 Thanos Query UI"},o="Whizard-monitoring-gateway \u5f00\u542f Debug \u6a21\u5f0f\u4ee3\u7406 Thanos Query UI",d={id:"guide/faq/debug-ui",title:"Whizard-monitoring-gateway \u5f00\u542f Debug \u6a21\u5f0f\u4ee3\u7406 Thanos Query UI",description:"Whizard-monitoring-gateway \u5f00\u542f Debug \u6a21\u5f0f\u4ee3\u7406 Thanos Query UI",source:"@site/whizard-docs/guide/faq/debug-ui.md",sourceDirName:"guide/faq",slug:"/guide/faq/debug-ui",permalink:"/whizard-docs/guide/faq/debug-ui",draft:!1,unlisted:!1,editUrl:"https://github.com/WhizardTelemetry/whizardtelemetry.github.io/tree/main/whizard-docs/whizard-docs/guide/faq/debug-ui.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3,description:"Whizard-monitoring-gateway \u5f00\u542f Debug \u6a21\u5f0f\u4ee3\u7406 Thanos Query UI"},sidebar:"tutorialSidebar",previous:{title:"Whizard \u90e8\u7f72\u67b6\u6784\u53ca\u6570\u636e\u6d41\u56fe",permalink:"/whizard-docs/guide/faq/data-flow"},next:{title:"\u5b89\u5168\u589e\u5f3a",permalink:"/whizard-docs/category/\u5b89\u5168\u589e\u5f3a"}},s={},u=[{value:"1. Gateway \u5f00\u542f Debug \u6a21\u5f0f",id:"1-gateway-\u5f00\u542f-debug-\u6a21\u5f0f",level:2},{value:"2. Query \u7ec4\u4ef6\u589e\u52a0 <code>--web.prefix-header=X-Forwarded-Prefix</code> flag",id:"2-query-\u7ec4\u4ef6\u589e\u52a0---webprefix-headerx-forwarded-prefix-flag",level:2},{value:"3. \u4f7f\u7528 Gateway NodePort \u7aef\u53e3\u8bbf\u95ee Thanos Query UI",id:"3-\u4f7f\u7528-gateway-nodeport-\u7aef\u53e3\u8bbf\u95ee-thanos-query-ui",level:2}];function h(e){const r={code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.h1,{id:"whizard-monitoring-gateway-\u5f00\u542f-debug-\u6a21\u5f0f\u4ee3\u7406-thanos-query-ui",children:"Whizard-monitoring-gateway \u5f00\u542f Debug \u6a21\u5f0f\u4ee3\u7406 Thanos Query UI"}),"\n",(0,n.jsx)(r.h2,{id:"1-gateway-\u5f00\u542f-debug-\u6a21\u5f0f",children:"1. Gateway \u5f00\u542f Debug \u6a21\u5f0f"}),"\n",(0,n.jsxs)(r.p,{children:["\u4fee\u6539 gateway cr\uff0c",(0,n.jsx)(r.code,{children:"kubectl edit gateways.monitoring.whizard.io -n kubesphere-monitoring-system whizard"}),"\uff0c\u5f00\u542f debug \u6a21\u5f0f"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-yaml",children:"spec:\n  debug: true                                           # \u5f00\u542f Debug \u6a21\u5f0f\n  enabledTenantsAdmission: true\n  image: kubesphere/whizard-monitoring-gateway:v0.10.0\n  logFormat: logfmt\n  logLevel: info\n  nodePort: 30990                                      # gateway nodePort \u7aef\u53e3\n"})}),"\n",(0,n.jsxs)(r.h2,{id:"2-query-\u7ec4\u4ef6\u589e\u52a0---webprefix-headerx-forwarded-prefix-flag",children:["2. Query \u7ec4\u4ef6\u589e\u52a0 ",(0,n.jsx)(r.code,{children:"--web.prefix-header=X-Forwarded-Prefix"})," flag"]}),"\n",(0,n.jsxs)(r.p,{children:["\u4fee\u6539 query cr\uff0c",(0,n.jsx)(r.code,{children:"kubectl edit query.monitoring.whizard.io -n kubesphere-monitoring-system whizard"}),"\uff0c\u589e\u52a0 ",(0,n.jsx)(r.code,{children:"--web.prefix-header=X-Forwarded-Prefix"})," flag"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-yaml",children:"spec:\n  envoy:\n    image: envoyproxy/envoy:v1.20.2\n  flags:\n  - --web.prefix-header=X-Forwarded-Prefix\n  image: thanosio/thanos:v0.36.0\n  logFormat: logfmt\n  logLevel: info\n  replicaLabelNames:\n  - prometheus_replica\n  - receive_replica\n  - ruler_replica\n"})}),"\n",(0,n.jsx)(r.h2,{id:"3-\u4f7f\u7528-gateway-nodeport-\u7aef\u53e3\u8bbf\u95ee-thanos-query-ui",children:"3. \u4f7f\u7528 Gateway NodePort \u7aef\u53e3\u8bbf\u95ee Thanos Query UI"}),"\n",(0,n.jsxs)(r.p,{children:["\u914d\u7f6e\u597d\u4e0a\u8ff0\u4e24\u6b65\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528  ",(0,n.jsx)(r.code,{children:"https://<host-ip>:30990/-/ui/"})," \u76f4\u63a5\u8bbf\u95ee Thanos Query UI \u9875\u9762\u3002"]})]})}function c(e={}){const{wrapper:r}={...(0,a.R)(),...e.components};return r?(0,n.jsx)(r,{...e,children:(0,n.jsx)(h,{...e})}):h(e)}},8453:(e,r,i)=>{i.d(r,{R:()=>o,x:()=>d});var n=i(6540);const a={},t=n.createContext(a);function o(e){const r=n.useContext(t);return n.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function d(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),n.createElement(t.Provider,{value:r},e.children)}}}]);